{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["axios","get","then","response","data","nameObject","post","id","delete","SubmitForms","props","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filters","filter","hfc","ShowPersons","persons","map","p","key","name","number","onClick","delName","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","r","setR","errorMessage","setErrorMessage","useEffect","console","log","personService","initialPersons","length","event","target","toLowerCase","includes","preventDefault","some","window","alert","returnedPerson","concat","setTimeout","catch","error","targetID","targetName","find","confirm","returnedStuff","x","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.92bbe6c0.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseURL = '/api/persons' //muutos frontin deployaukseen\n\nconst getAll = () => {\n    const request = axios.get(baseURL)\n    return request.then(response => response.data)\n}\n\nconst create = nameObject => {\n    const request = axios.post(baseURL, nameObject)\n    return request.then(response => response.data)\n}\n\nconst del = (id) => {\n    const request = axios.delete(baseURL + `/${id}`) \n    return request.then(response => response.data)\n}\n\nexport default {\n    getAll,\n    create,\n    del\n}","import React, { useState, useEffect} from 'react'\nimport personService from './services/persons'\n//testitesti\nconst SubmitForms = (props) => {\n  return (\n    <form onSubmit={props.addName}>\n      <div>\n        name: <input\n          value={props.newName}\n          onChange={props.handleNameChange} />\n        <br></br>\n          number: <input\n          value={props.newNumber}\n          onChange={props.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Filters = (props) => {\n  return (\n    <div>filtering with: <input\n                              value={props.filter}\n                              onChange={props.hfc} />\n    </div>\n  )\n}\nconst ShowPersons = (props) => {\n  return(\n    <div>\n      {\n        props.persons.map(p =>\n          <p key={p.name}>{p.name} {p.number} \n          <button onClick={props.delName} value={p.id}>delete</button> \n          </p>\n        )\n      }\n    </div>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [r, setR] = useState(persons)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        console.log(initialPersons)\n        setPersons(initialPersons)\n        setR(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const addName = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    \n    if (persons.some(p => p.name === newName)) {\n      console.log(nameObject.name)\n      window.alert(`${newName} is already added to phonebook`);\n      setNewName('')\n      setNewNumber('')\n    } else {\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setR(persons.concat(returnedPerson))\n          setErrorMessage(\n            `'${newName}' was added to the phonebook!`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error =>  {\n          setErrorMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n  const delName = (event) => {\n    event.preventDefault()\n    const targetID = event.target.value\n    const targetName = persons.find(p => p.id === targetID).name\n    if (window.confirm(`Delete ${targetName}?`)) {\n    personService\n      .del(targetID)\n      .then(returnedStuff => {\n        setPersons(persons.filter(x => x.name !== returnedStuff))\n        setR(persons.filter(x => x.name !== returnedStuff))\n        setErrorMessage(\n          `'${targetName}' was removed from the phonebook!`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setFilter(event.target.value)\n    setR(persons.filter(p => p.name.toLowerCase().includes(event.target.value.toLowerCase())))\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filters hfc = {handleFilterChange} filter = {filter}/>\n      <h3>Add a new</h3>\n      <SubmitForms\n          addName = {addName}\n          newName = {newName}\n          handleNameChange = {handleNameChange}\n          newNumber = {newNumber}\n          handleNumberChange = {handleNumberChange}\n          />\n      <h2>Numbers</h2>\n      <ShowPersons\n      persons = {r}\n      delName = {delName}\n      />\n    </div>\n    \n  )\n\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}